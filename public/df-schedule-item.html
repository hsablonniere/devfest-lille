<dom-module id="df-schedule-item">

    <style>

        .schedule-item {
            display: flex;
            align-items: center;
            padding: 0 8px 0 24px;
            padding-bottom: var(--schedule-item__time-after-padding-bottom);
            position: relative;
            text-decoration: none;
        }

        .schedule-item:before {
            content: '';
            width: 2px;
            height: 100%;
            position: absolute;
            top: 0;
            left: 48px;
            background: var(--paper-grey-400);
        }

        .schedule-item__speaker {
            width: 208px;
            flex: 0 0 auto;
            flex-direction: column;
            align-items: center;
            position: relative;
            display: none
        }

        .schedule-item__placeholder .schedule-item__speaker-details, .schedule-item__speaker .schedule-item__speaker-details {
            position: absolute;
            bottom: -8px;
            left: 0;
            transform: translateY(100%);
            text-align: center;
            width: 208px
        }

        .schedule-item__placeholder h2, .schedule-item__speaker h2 {
            font-weight: 700;
            font-size: 16px;
            margin: 0;
            padding: 0;
            color: var(--paper-indigo-900);
        }

        .schedule-item__placeholder h3, .schedule-item__speaker h3 {
            font-size: 13px;
            color: var(--paper-deep-orange-500);
            line-height: 24px;
            margin: 0;
            padding: 0
        }

        .schedule-item__speaker:before {
            content: '';
            width: 50%;
            height: 2px;
            background:  var(--paper-grey-400);
            position: absolute;
            top: 50%;
            right: 0
        }

        .schedule-item__speaker-image {
            background: var(--secondary-color);
            clip-path: circle(49% at 50% 51%);
            height: 100px;
            margin: 0 auto;
            width: 100px;
        }

        .schedule-item__speaker-image img {
            clip-path: circle(49% at 50% 48%);
            height: 100px;
            width: 100px;
        }

        .schedule-item__time {
            position: relative;
            display: flex;
            flex-direction: column;
            flex: 0 0 auto;
            align-self: stretch
        }

        .schedule-item__time:after, .schedule-item__time:before {
            height: 100%;
            width: 48px;
            display: block;
            content: '';
            flex: 1
        }

        .schedule-item__time:after {
            background: var(--schedule-item__time-after-background);
        }

        .schedule-item__time-value {
            background: var(--paper-deep-orange-500);
            color: #FFF;
            border-radius: 50%;
            font-size: 13px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 48px
        }

        .schedule-item__details {
            display: flex;
            text-align: left;
        }

        .schedule-item__details:before {
            content: '';
            display: block;
            width: 16px;
            margin-right: 8px;
            flex: 1 0 auto
        }

        .schedule-item__title {
            font-weight: 700;
            font-size: 18px;
            color: var(--paper-indigo-900);
            line-height: 23px;
            margin: 0 0 8px;
            padding: 0
        }

        .schedule-item__description {
            color: #555;
            flex: 1 0 auto;
            font-size: 14px;
            line-height: 24px;
            margin: 0;
            padding: 0;
        }

        .schedule-item__description p {
            margin: 0
        }

        @media (min-width: 600px) {

            .schedule-item__speaker {
                display: flex
            }

            .schedule-item {
                padding-left: 8px;
            }

            .schedule-item:before {
                left: 240px
            }
        }

        .no-before:before {
            visibility: hidden;
        }
    </style>

    <template>

        <div class="schedule-item">

            <div class$="schedule-item__speaker [[noBeforeClass]]">
                <template is="dom-if" if="[[avatar]]">
                    <div class="schedule-item__speaker-image">
                        <img src="./images/speakers/[[avatar]]" alt="[[name]]"
                             width="128" height="128">
                    </div>
                </template>

                <div class="schedule-item__speaker-details">
                    <h2>[[name]]</h2>
                    <h3>[[company]]</h3>
                </div>
            </div>

            <div class="schedule-item__time">
                <time title="[[dateLabel]]" class="schedule-item__time-value"
                      datetime="[[datetime]]">[[dateLabel]]
                </time>
            </div>

            <div class="schedule-item__details">
                <div class="schedule-item__details-inner">
                    <h2 class="schedule-item__title">[[title]]</h2>
                    <div class="schedule-item__description">

                        <p>[[abstract]]</p>

                    </div>
                </div>
            </div>
        </div>
    </template>
    <script>
        Polymer({
            is: 'df-schedule-item',

            properties: {
                name: String,
                company: String,
                avatar: String,
                title: String,
                abstract: String,
                datetime: Date,
                dateLabel: String
            },

            ready: function() {
                this.noBeforeClass = '';

                if (!this.avatar || this.avatar === '') {
                    this.noBeforeClass = 'no-before';
                }
            }
        });
    </script>
</dom-module>